let authConfigPath="";function waitForAuthConfig(){return new Promise((e,t)=>{const o=({data:n})=>{n&&n.cortexAuth?.configPath?(authConfigPath=n.cortexAuth.configPath,console.debug("Got the config path for iframe: ",authConfigPath),e()):t(new Error("Auth-config path does not exist inside CortexAuth event object!")),clearTimeout(i),window.removeEventListener("message",o)};window.addEventListener("message",o);const i=setTimeout(()=>{t(new Error("Auth-config path event not triggered within 3 seconds")),window.removeEventListener("message",o)},3e3)})}function injectIframeAuthModule(){const e=document.createElement("script");return e.type="text/javascript",e.src="./js/cortex-iframe-auth.js",document.body.appendChild(e),new Promise((t,r)=>{e.onload=function(){t(),console.debug("Auth-In-Iframe module loaded!")},e.onerror=function(){r(new Error("Something went wrong while injecting Auth-In-Iframe module!"))}})}(async()=>{window.parent.postMessage({cortexAuth:{isIframeLoaded:!0}},"*");try{await waitForAuthConfig()}catch(e){console.debug(e.message)}finally{console.debug(`AuthConfigPath: ${authConfigPath||"Using default"}`);try{await injectIframeAuthModule()}catch(e){console.error(e.message)}}})();