"cname","filename","filescript","organization"
"LEOCDGNR37410","LEOCDGNR37410_leo1311.py","aW1wb3J0IHN5cywgb3MNCiMgZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlDQppbXBvcnQgc3lzDQppbXBvcnQgb3MucGF0aA0KaW1wb3J0IGpzb24NCmltcG9ydCByZQ0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IGRlZmF1bHRkaWN0DQoNCmFyZ3VtZW50cyA9IHN5cy5hcmd2DQphcmdzRGljdCA9IHt9DQpmb3IgYXJnIGluIGFyZ3VtZW50czoNCiAgICB0cnk6DQogICAgICAgIGFyZ3NEaWN0W2FyZy5zcGxpdCgnOicpWzBdXSA9ICgnOicpLmpvaW4oYXJnLnNwbGl0KCc6JylbMTpdKQ0KICAgIGV4Y2VwdDoNCiAgICAgICAgYSA9ICdlcnJvcicNCiAgICAgICAgDQpqc29uX2ZpbGUgPSBvcy5wYXRoLmpvaW4oYXJnc0RpY3RbJ3NjcmlwdFBhdGgnXSwgJ3BpcGVsaW5lLmpzb24nKQ0KDQp3aXRoIG9wZW4oanNvbl9maWxlKSBhcyBmOg0KICAgIGltcG9ydCBqc29uDQogICAgcGlwZWxpbmVfanNvbiA9IGpzb24ubG9hZChmKQ0KICAgIHByaW50KHBpcGVsaW5lX2pzb24pDQogDQoNCiMgYmFzZSBzY3JpcHQgDQpkZWYgYmFzZVNjcmlwdCgpOg0KICAgIHJldHVybiAnJycNCmltcG9ydCBzeXMNCmltcG9ydCBvcw0KaW1wb3J0IHN1YnByb2Nlc3MNCmltcG9ydCBsb2dnaW5nDQoNCntpbXBvcnRzfQ0KDQojIG9zLmVudmlyb25bJ0hUVFBfUFJPWFknXT0naHR0cDovL2JscnByb3h5LmFkLmluZm9zeXMuY29tOjgwJw0KIyBvcy5lbnZpcm9uWydIVFRQU19QUk9YWSddPSdodHRwOi8vYmxycHJveHkuYWQuaW5mb3N5cy5jb206ODAnDQojIG9zLmVudmlyb25bJ2h0dHBfcHJveHknXT0naHR0cDovL2JscnByb3h5LmFkLmluZm9zeXMuY29tOjgwJw0KIyBvcy5lbnZpcm9uWydodHRwc19wcm94eSddPSdodHRwOi8vYmxycHJveHkuYWQuaW5mb3N5cy5jb206ODAnDQoNCiMgb3MuZW52aXJvblsnTk9fUFJPWFknXT0nMTAuKixsb2NhbGhvc3QsMC4wLjAuMCx2aWN0bHBhc3QwMiwwLjAuMC4wLDEyNy4wLjAuMSwxMC44MS43OC4xNDYsdmljdGNiZmMxNjAsMTAuMTU2Ljg5LjgsMTAuMjI0LjIxNi4xMCwxMC42Ni4xNS4xMDAnDQpyZXF1aXJlbWVudHMgPSBbe3JlcXVpcmVtZW50c31dDQpmb3IgbW9kdWxlIGluIHJlcXVpcmVtZW50czoNCiAgICBzdWJwcm9jZXNzLnJ1bihzeXMuZXhlY3V0YWJsZSArICcgLW0gcGlwIGluc3RhbGwgJysgbW9kdWxlICsgJyAtLWluZGV4LXVybCBodHRwczovL3NocmV5YV9iYW5zYWxAYWQuaW5mb3N5cy5jb206Y21WbWRHdHVPakF4T2pFM01qSTVNemsxTWpBNmIyNVljM1pWUlVZeFYydFlSMVZEUzFwM2VsTkZNa3hRT0hwTUBpbmZ5YXJ0aWZhY3RvcnkuamZyb2cuaW8vYXJ0aWZhY3RvcnkvYXBpL3B5cGkvcHlwaS1yZW1vdGUvc2ltcGxlIC0tdHJ1c3RlZC1ob3N0IGluZnlhcnRpZmFjdG9yeS5qZnJvZy5pbycsc2hlbGw9VHJ1ZSkNCiAgICAjIHN1YnByb2Nlc3MucnVuKHN5cy5leGVjdXRhYmxlICsgJyAtbSBwaXAgaW5zdGFsbCAnKyBtb2R1bGUpDQogICAgcHJpbnQoIklOU1RBTExJTkciK21vZHVsZSkNCg0KbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoX19uYW1lX18pDQpsb2dnZXIuc2V0TGV2ZWwobG9nZ2luZy5ERUJVRykNCmhhbmRsZXIgPSBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKQ0KZm9ybWF0dGVyID0gbG9nZ2luZy5Gb3JtYXR0ZXIoJyUoYXNjdGltZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJykNCmhhbmRsZXIuc2V0Rm9ybWF0dGVyKGZvcm1hdHRlcikNCmxvZ2dlci5hZGRIYW5kbGVyKGhhbmRsZXIpDQoNCnRpY2tldF9udW1iZXIgPSAiIg0KDQpjaGF0Ym90X3BhcmFtcyA9IHtjaGF0Ym90X3BhcmFtc30NCg0Ke3Rvb2xfZnVuY3Rpb25zfQ0KDQp7ZnVuY3Rpb25zfQ0KDQpkZWYgZXhlY3V0ZVBpcGVsaW5lKCk6DQp7ZXhlY3V0aW9uT3JkZXJ9DQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICBleGVjdXRlUGlwZWxpbmUoKQ0KICAgIHByaW50KCdDb21wbGV0ZWQnKQ0KJycnDQoNCiMgYmFzZSBzY3JpcHQgDQpkZWYgYmFzZVNjcmlwdF9mbGFzaygpOg0KICAgIHJldHVybiAnJycNCmltcG9ydCBzeXMNCmltcG9ydCBvcw0KaW1wb3J0IHN1YnByb2Nlc3MNCg0Ke2ltcG9ydHN9DQoNCmltcG9ydCBsb2dnaW5nDQoNCiMgb3MuZW52aXJvblsnSFRUUF9QUk9YWSddPSdodHRwOi8vYmxycHJveHkuYWQuaW5mb3N5cy5jb206ODAnDQojIG9zLmVudmlyb25bJ0hUVFBTX1BST1hZJ109J2h0dHA6Ly9ibHJwcm94eS5hZC5pbmZvc3lzLmNvbTo4MCcNCiMgb3MuZW52aXJvblsnaHR0cF9wcm94eSddPSdodHRwOi8vYmxycHJveHkuYWQuaW5mb3N5cy5jb206ODAnDQojIG9zLmVudmlyb25bJ2h0dHBzX3Byb3h5J109J2h0dHA6Ly9ibHJwcm94eS5hZC5pbmZvc3lzLmNvbTo4MCcNCg0KIyBvcy5lbnZpcm9uWydOT19QUk9YWSddPScxMC4qLGxvY2FsaG9zdCwwLjAuMC4wLHZpY3RscGFzdDAyLDAuMC4wLjAsMTI3LjAuMC4xLDEwLjgxLjc4LjE0Nix2aWN0Y2JmYzE2MCwxMC4xNTYuODkuOCwxMC4yMjQuMjE2LjEwLDEwLjY2LjE1LjEwMCcNCnJlcXVpcmVtZW50cyA9IFt7cmVxdWlyZW1lbnRzfV0NCmZvciBtb2R1bGUgaW4gcmVxdWlyZW1lbnRzOg0KICAgIHN1YnByb2Nlc3MucnVuKHN5cy5leGVjdXRhYmxlICsgJyAtbSBwaXAgaW5zdGFsbCAnKyBtb2R1bGUgKyAnIC0taW5kZXgtdXJsIGh0dHBzOi8vc2hyZXlhX2JhbnNhbEBhZC5pbmZvc3lzLmNvbTpjbVZtZEd0dU9qQXhPakUzTWpJNU16azFNakE2YjI1WWMzWlZSVVl4VjJ0WVIxVkRTMXAzZWxORk1reFFPSHBNQGluZnlhcnRpZmFjdG9yeS5qZnJvZy5pby9hcnRpZmFjdG9yeS9hcGkvcHlwaS9weXBpLXJlbW90ZS9zaW1wbGUgLS10cnVzdGVkLWhvc3QgaW5meWFydGlmYWN0b3J5Lmpmcm9nLmlvJyxzaGVsbD1UcnVlKQ0KDQoNCmxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQ0KbG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuREVCVUcpDQpoYW5kbGVyID0gbG9nZ2luZy5TdHJlYW1IYW5kbGVyKCkNCmZvcm1hdHRlciA9IGxvZ2dpbmcuRm9ybWF0dGVyKCclKGFzY3RpbWUpcyAtICUobGV2ZWxuYW1lKXMgLSAlKG1lc3NhZ2UpcycpDQpoYW5kbGVyLnNldEZvcm1hdHRlcihmb3JtYXR0ZXIpDQpsb2dnZXIuYWRkSGFuZGxlcihoYW5kbGVyKQ0KDQp0aWNrZXRfbnVtYmVyID0gIiINCg0KY2hhdGJvdF9wYXJhbXMgPSB7Y2hhdGJvdF9wYXJhbXN9DQoNCntmbGFza19hcHB9DQoNCnt0b29sX2Z1bmN0aW9uc30NCg0Ke2Z1bmN0aW9uc30NCg0KZGVmIGV4ZWN1dGUoKToNCntleGVjdXRlZmxhc2t9DQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgZXhlY3V0ZSgpDQogICAgcHJpbnQoJ0NvbXBsZXRlZCcpDQonJycNCg0KIyBOb2RlIA0KY2xhc3MgR3JhcGg6DQoJZGVmIF9faW5pdF9fKHNlbGYsIHZlcnRpY2VzKToNCgkJc2VsZi5ncmFwaCA9IGRlZmF1bHRkaWN0KGxpc3QpDQoJCXNlbGYuViA9IHZlcnRpY2VzDQoJDQoJZGVmIGFkZEVkZ2Uoc2VsZiwgdSwgdik6DQoJCXNlbGYuZ3JhcGhbdV0uYXBwZW5kKHYpDQoNCglkZWYgdG9wb2xvZ2ljYWxTb3J0VXRpbChzZWxmLCB2LCB2aXNpdGVkLCBzdGFjayk6DQoJCXZpc2l0ZWRbdl0gPSBUcnVlDQoJCWZvciBpIGluIHNlbGYuZ3JhcGhbdl06DQoJCQlpZiB2aXNpdGVkW2ldID09IEZhbHNlOg0KCQkJCXNlbGYudG9wb2xvZ2ljYWxTb3J0VXRpbChpLCB2aXNpdGVkLCBzdGFjaykNCgkJc3RhY2suYXBwZW5kKHYpDQoNCglkZWYgdG9wb2xvZ2ljYWxTb3J0KHNlbGYpOg0KCQl2aXNpdGVkID0gW0ZhbHNlXSpzZWxmLlYNCgkJc3RhY2sgPSBbXQ0KDQoJCWZvciBpIGluIHJhbmdlKHNlbGYuVik6DQoJCQlpZiB2aXNpdGVkW2ldID09IEZhbHNlOg0KCQkJCXNlbGYudG9wb2xvZ2ljYWxTb3J0VXRpbChpLCB2aXNpdGVkLCBzdGFjaykNCg0KCQlyZXR1cm4gc3RhY2tbOjotMV0gDQoNCmNsYXNzIE5vZGU6DQogICAgZGVmIF9faW5pdF9fKHNlbGYsIGpzb25PYmplY3QpOg0KICAgICAgICBzZWxmLmxldmVsID0gMDsNCiAgICAgICAgc2VsZi5pZCA9IGpzb25PYmplY3QuZ2V0KCdpZCcsJycpOw0KICAgICAgICBzZWxmLm5hbWUgPSBqc29uT2JqZWN0LmdldCgnbmFtZScsJycpOw0KICAgICAgICBzZWxmLmNsYXNzTmFtZSA9IGpzb25PYmplY3QuZ2V0KCdjbGFzc25hbWUnLCBzZWxmLm5hbWUgKyAnQ29uZmlnJyk7DQogICAgICAgIHNlbGYuY2F0ZWdvcnkgPSBqc29uT2JqZWN0LmdldCgnY2F0ZWdvcnknLCcnKTsNCiAgICAgICAgc2VsZi5hdHRyaWJ1dGVzID0ganNvbk9iamVjdC5nZXQoJ2F0dHJpYnV0ZXMnLCcnKTsNCiAgICAgICAgc2VsZi5jb25uZWN0b3JzID0ganNvbk9iamVjdC5nZXQoJ2Nvbm5lY3RvcnMnLCcnKTsNCiAgICAgICAgc2VsZi5wYXJlbnQgPSBOb25lDQogICAgICAgIHNlbGYuZm9ybWF0cyA9IGpzb25PYmplY3QuZ2V0KCdmb3JtYXRzJywnJyk7ICAgICAgICANCg0KIyBCdWlsZGluZyBEQUcgb3JkZXINCmRlZiBidWlsZERBR09yZGVyKGVsZW1lbnRzKToNCiAgICAjIGdldCBhbGwgZWxlbWVudHMgZnJvbSBqc29uDQogICAgZWxlbWVudGxpc3QgPSBbXQ0KICAgIG5vZGVsaXN0ID0gW10NCiAgICBmb3IgZSBpbiBlbGVtZW50czoNCiAgICAgICAgbm9kZSA9IE5vZGUoZSkNCiAgICAgICAgbm9kZWxpc3QuYXBwZW5kKG5vZGUpDQoNCiAgICBpZF90b19udW0gPSB7fQ0KICAgIG51bV90b19pZCA9IHt9DQogICAgaWRfdG9fbm9kZSA9IHt9DQogICAgZm9yIGksIGVsZSBpbiBlbnVtZXJhdGUobm9kZWxpc3QpOg0KICAgICAgICBpZF90b19udW1bZWxlLmlkXSA9IGkNCiAgICAgICAgbnVtX3RvX2lkW2ldID0gZWxlLmlkDQogICAgICAgIGlkX3RvX25vZGVbZWxlLmlkXSA9IGVsZQ0KDQogICAgdmVydGV4ID0gbGVuKG5vZGVsaXN0KQ0KICAgIGcgPSBHcmFwaCh2ZXJ0ZXgpICANCg0KICAgIGZvciBpdGVtIGluIG5vZGVsaXN0Og0KICAgICAgICBwYXJlbnRpZCA9ICcnDQogICAgICAgIGNoaWxkaWQgPSAnJw0KICAgICAgICBmb3IgY29ubmVjdG9yIGluIGl0ZW0uY29ubmVjdG9yczoNCiAgICAgICAgICAgIGlmIChjb25uZWN0b3JbJ3R5cGUnXSA9PSAndGFyZ2V0Jyk6DQogICAgICAgICAgICAgICAgcGFyZW50aWQgPSBjb25uZWN0b3JbJ2VsZW1lbnRJZCddDQogICAgICAgICAgICAgICAgZy5hZGRFZGdlKGlkX3RvX251bVtwYXJlbnRpZF0sIGlkX3RvX251bVtpdGVtLmlkXSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjb25uZWN0b3JbJ3R5cGUnXSA9PSAnc291cmNlJyk6DQogICAgICAgICAgICAgICAgY2hpbGRpZCA9IGNvbm5lY3RvclsnZWxlbWVudElkJ10NCiAgICAgICAgICAgICAgICBnLmFkZEVkZ2UoaWRfdG9fbnVtW2l0ZW0uaWRdLCBpZF90b19udW1bY2hpbGRpZF0pDQoNCiAgICBzdGFjayA9IGcudG9wb2xvZ2ljYWxTb3J0KCkNCiAgICBzdGFjayA9IFtudW1fdG9faWRbbnVtXSBmb3IgbnVtIGluIHN0YWNrXQ0KDQogICAgZm9yIGlkIGluIHN0YWNrOg0KICAgICAgICAgIGVsZW1lbnRsaXN0LmFwcGVuZChpZF90b19ub2RlW2lkXSkNCiAgICByZXR1cm4gZWxlbWVudGxpc3QNCg0KIyBmaWxsIGFsbCBqb2IgcGFyYW1zIGluIHBpcGVsaW5lSnNvbg0KZGVmIGZpbGxKb2JQYXJhbXMocGlwZWxpbmVKc29uKToNCg0KICAgIG9yZ2FuaXphdGlvbiA9IHBpcGVsaW5lSnNvbi5nZXQoJ29yZycsICdJTkZPU1lTJykNCg0KICAgICMgU2V0IGFsbCBKb2IgUGFyYW1zDQogICAgam9iUGFyYW1zID0ge30NCiAgICBqb2JQYXJhbXNbJ05leHRFeGVjdXRpb25UaW1lJ10gPSBwaXBlbGluZUpzb24uZ2V0KCdOZXh0X0V4ZWN1dGlvbl9UaW1lJywgJycpDQogICAgam9iUGFyYW1zWydDdXJyZW50RXhlY3V0aW9uVGltZSddID0gcGlwZWxpbmVKc29uLmdldCgnQ3VycmVudF9FeGVjdXRpb25fVGltZScsICcnKQ0KICAgIGpvYlBhcmFtc1snTGFzdFN1Y2Nlc3NmdWxFeGVjdXRpb25UaW1lJ10gPSBwaXBlbGluZUpzb24uZ2V0KCdMYXN0X1N1Y2Nlc3NmdWxfRXhlY3V0aW9uX1RpbWUnLCAnJykNCiAgICBqb2JQYXJhbXNbJ0xhc3RFeGVjdXRpb25UaW1lJ10gPSBwaXBlbGluZUpzb24uZ2V0KCdMYXN0X0V4ZWN1dGlvbl9UaW1lJywgJycpDQoNCiAgICByZWdFeCA9ICc8am9iUGFyYW1zOihbXHdcLi1dKyk7KC4qPyk+Jw0KICAgIHBpcGVsaW5lSnNvbkxpc3QgPSBbXQ0KDQogICAgZm9yIGl0ZW0gaW4gcGlwZWxpbmVKc29uWydlbGVtZW50cyddOg0KICAgICAgICBpdGVtVGV4dCA9IGpzb24uZHVtcHMoaXRlbSkNCiAgICAgICAgIyByZXBsYWNlIE9yZw0KICAgICAgICBpdGVtVGV4dCA9IGl0ZW1UZXh0LnJlcGxhY2UoJzxqb2JQYXJhbXM6b3JnTmFtZT4nLCBvcmdhbml6YXRpb24pDQogICAgICAgICMgcmVwbGFjZSB0aW1lc3RhbXBzDQogICAgICAgIHBhcmFtcyA9IHJlLmZpbmRhbGwocmVnRXgsIGl0ZW1UZXh0KQ0KICAgICAgICBmb3IgcCBpbiBwYXJhbXM6DQogICAgICAgICAgICB0ZXh0VG9yZXBsYWNlID0gJzxqb2JQYXJhbXM6ezB9O3sxfT4nLmZvcm1hdChwWzBdLCBwWzFdKQ0KICAgICAgICAgICAgaWYgam9iUGFyYW1zW3BbMF1dICE9ICcnIGFuZCBqb2JQYXJhbXNbcFswXV0gIT0gLTE6DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICBkdCA9IGRhdGV0aW1lLnN0cnB0aW1lKGpvYlBhcmFtc1twWzBdXSwgJyVhLCAlZCAlYiAlWSAlSDolTTolUycpDQogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VXaXRoID0gZGF0ZXRpbWUuc3RyZnRpbWUoZHQsIHBbMV0pDQogICAgICAgICAgICAgICAgICAgIGl0ZW1UZXh0ID0gaXRlbVRleHQucmVwbGFjZSh0ZXh0VG9yZXBsYWNlLCByZXBsYWNlV2l0aCkNCiAgICAgICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgICAgIGEgPSAxDQogICAgICAgIHBpcGVsaW5lSnNvbkxpc3QuYXBwZW5kKGpzb24ubG9hZHMoaXRlbVRleHQpKQ0KICAgIHJldHVybiBwaXBlbGluZUpzb25MaXN0DQoNCg0KIyBCdWlsZCBEQUcgb2YgYWxsIHRoZSBub2Rlcw0KIyBSZXR1cm5zIHRoZSBsaXN0IG9mIGVsZW1lbnRzIGluIG9yZGVyDQpkZWYgYnVpbGREQUcocGlwZWxpbmVKc29uTGlzdCk6DQogICAgcHJpbnQoJ3BpcGVsaW5lSnNvbkxpc3QnLCApDQogICAgb3JkZXJlZEVsZW1lbnRMaXN0ID0gYnVpbGREQUdPcmRlcihwaXBlbGluZUpzb25MaXN0KSAjIERBRy5idWlsZChwaXBlbGluZUpzb25MaXN0KTsNCiAgICBvcmRlcmVkRWxlbWVudExpc3QgPSBsaXN0KGZpbHRlcihOb25lLCBvcmRlcmVkRWxlbWVudExpc3QpKQ0KICAgIHJldHVybiBvcmRlcmVkRWxlbWVudExpc3QNCg0KDQojIGZpbGwgbm9kZSBhdHRyaWJ1dGVzIHdpdGggQWN0dWFsIERhdGENCmRlZiBmaWxsRGF0YW5vZGUobm9kZSwgc2NyaXB0KToNCiAgICBhdHRyaWJ1dGVzID0gcmUuZmluZGFsbCgnXDwoLio/KVw+Jywgc2NyaXB0KQ0KICAgIA0KICAgIGZvciBpdGVtIGluIGF0dHJpYnV0ZXM6DQoNCiAgICAgICAgaW5wdXRfc3BsaXQgPSBpdGVtLnNwbGl0KCcuJykNCiAgICAgICAga2V5cyA9ICcnLmpvaW4oWycnJ1snezB9J10nJycuZm9ybWF0KGspIGZvciBrIGluIGlucHV0X3NwbGl0XSkNCiAgICAgICAgDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFsdWUgPSBldmFsKCcnJ25vZGUuYXR0cmlidXRlcycnJyArICcnJ3swfScnJy5mb3JtYXQoa2V5cykpDQogICAgICAgICAgICBpZiBub2RlLmNsYXNzTmFtZSAhPSAnRGF0YXNldEV4dHJhY3RvckNvbmZpZycgYW5kIG5vZGUuY2xhc3NOYW1lICE9ICdEYXRhc2V0TG9hZGVyQ29uZmlnJzoNCiAgICAgICAgICAgICAgICBmb3JtID0gZXZhbCgnJydub2RlLmZvcm1hdHMnJycgKyAnJyd7MH0nJycuZm9ybWF0KGtleXMpKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIGZvcm0gPT0gJ2Jvb2wnOg0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICdUcnVlJyBpZiB2YWx1ZT09J3RydWUnIGVsc2UgJ0ZhbHNlJw0KICAgICAgICAgICAgDQogICAgICAgICAgICBzY3JpcHQgPSBzY3JpcHQucmVwbGFjZSgnPCcgKyBpdGVtICsgJz4nLCBzdHIodmFsdWUpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcHJpbnQoJ2luIEV4Y2VwdCcpDQogICAgICAgICAgICBzY3JpcHQgPSBzY3JpcHQucmVwbGFjZSgnPCcgKyBpdGVtICsgJz4nLCAnJykNCg0KICAgIHJldHVybiBzY3JpcHQNCg0KIyBmaWxsIG5vZGUgYXR0cmlidXRlcyB3aXRoIEFjdHVhbCBEYXRhDQojIGRlZiBmaWxsRGF0YW5vZGUobm9kZSwgc2NyaXB0KToNCiMgICAgIGF0dHJpYnV0ZXMgPSByZS5maW5kYWxsKCdcPCguKj8pXD4nLCBzY3JpcHQpDQogICAgDQojICAgICBmb3IgaXRlbSBpbiBhdHRyaWJ1dGVzOg0KDQojICAgICAgICAgaW5wdXRfc3BsaXQgPSBpdGVtLnNwbGl0KCcuJykNCiMgICAgICAgICBrZXlzID0gJycuam9pbihbJycnWyd7MH0nXScnJy5mb3JtYXQoaykgZm9yIGsgaW4gaW5wdXRfc3BsaXRdKQ0KICAgICAgICANCiMgICAgICAgICB0cnk6DQogICAgICAgICAgICANCiMgICAgICAgICAgICAgdmFsdWUgPSBldmFsKCcnJ25vZGUuYXR0cmlidXRlcycnJyArICcnJ3swfScnJy5mb3JtYXQoa2V5cykpDQojICAgICAgICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lICE9ICdEYXRhc2V0RXh0cmFjdG9yQ29uZmlnJzoNCiMgICAgICAgICAgICAgICAgIGZvcm0gPSBldmFsKCcnJ25vZGUuYXR0cmlidXRlcycnJyArICcnJ3swfScnJy5mb3JtYXQoa2V5cykpDQoNCiMgICAgICAgICAgICAgICAgIGlmIGZvcm0gPT0gJ2Jvb2wnOg0KIyAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJ1RydWUnIGlmIHZhbHVlLmxvd2VyKCk9PSd0cnVlJyBlbHNlICdGYWxzZScNCiAgICAgICAgICAgIA0KIyAgICAgICAgICAgICBzY3JpcHQgPSBzY3JpcHQucmVwbGFjZSgnPCcgKyBpdGVtICsgJz4nLCBzdHIodmFsdWUpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiMgICAgICAgICBleGNlcHQ6DQojICAgICAgICAgICAgIHByaW50KCdpbiBFeGNlcHQnKQ0KIyAgICAgICAgICAgICBzY3JpcHQgPSBzY3JpcHQucmVwbGFjZSgnPCcgKyBpdGVtICsgJz4nLCAnJykNCg0KIyAgICAgcmV0dXJuIHNjcmlwdA0KDQpkZWYgZ2VuZXJhdGVTY3JpcHQocGlwZWxpbmVKc29uKToNCg0KICAgICMgZm9ybWF0IHR5cGUgZm9yIHByZS1wcm9jZXNzaW5nIG5vZGUvcHl0aG9uLXNjcmlwdCBub2RlDQogICAgZGVmIGNvbihzLCB0KToNCiAgICAgICAgaWYgcz09J2ludCc6DQogICAgICAgICAgICByZXR1cm4gJ2ludGVnZXInDQogICAgICAgIGVsaWYgcz09J3N0cic6DQogICAgICAgICAgICByZXR1cm4gJ3RleHQnDQogICAgICAgIGVsaWYgcz09J2xpc3QnOg0KICAgICAgICAgICAgcmV0dXJuICdsaXN0Jw0KICAgICAgICBlbGlmIHM9PSdib29sJzoNCiAgICAgICAgICAgIHJldHVybiAnYm9vbCcNCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKHQsIHN0cik6DQogICAgICAgICAgICByZXR1cm4gJ3RleHQnDQogICAgICAgIGVsaWYgaXNpbnN0YW5jZSh0LCBpbnQpOg0KICAgICAgICAgICAgcmV0dXJuICdpbnRlZ2VyJw0KICAgICAgICByZXR1cm4gJ2Jvb2wnDQoNCg0KICAgIHBpcGVsaW5lRWxlbWVudHMgPSBmaWxsSm9iUGFyYW1zKHBpcGVsaW5lSnNvbikNCiAgICBvcmRlcmVkRWxlbWVudExpc3QgPSBidWlsZERBRyhwaXBlbGluZUVsZW1lbnRzKQ0KICAgIHJlcXVpcmVtZW50cyA9IFtdDQogICAgY2hhdGJvdF9wYXJhbXM9IHt9DQogICAgaW1wb3J0X2xpbmVzID0gW10NCiAgICBmdW5jdGlvbnMgPSBbXQ0KICAgIHRvb2xfZnVuY3Rpb25zID0gW10NCiAgICBkYXRhc2V0X2V4dHJhY3Rvcl9wYXJhbSA9IHt9DQogICAgZGF0YXNldF9sb2FkZXJfcGFyYW1zID0gW10NCiAgICBleHRyYWN0c2NyaXB0c3VmZml4ID0gJycNCiAgICBmdW5jdGlvbl9mbGFnID0ge30NCiAgICBmbGFza19mbGFnID0gRmFsc2UNCiAgICBmbGFza19jYWxsID0gJycNCiAgICBmbGFza19hcHAgPSBbXQ0KDQoNCiAgICAjIFNjcmlwdCBnZW5lcmF0aW9uDQogICAgZm9yIG5vZGUgaW4gb3JkZXJlZEVsZW1lbnRMaXN0Og0KICAgICAgICAjIEV4dHJhY3RvcnMNCiAgICAgICAgZWxlbWVudCA9IG5leHQoZSBmb3IgZSBpbiBwaXBlbGluZUpzb25bJ2VsZW1lbnRzJ10gaWYgZVsnaWQnXSA9PSBub2RlLmlkKQ0KICAgICAgICANCiAgICAgICAgaWYgbm9kZS5jbGFzc05hbWUgPT0gJ0RhdGFzZXRFeHRyYWN0b3JDb25maWcnOiAgIA0KICAgICAgICAgICAgZXh0cmFjdG9yU2NyaXB0ID0gXA0KICAgICAgICAgICAgICAgIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXVsnc2NyaXB0J10NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZXh0cmFjdG9yU2NyaXB0ID0gZXh0cmFjdG9yU2NyaXB0LnJlcGxhY2UoJ188aWQ+JywgJycpDQogICAgICAgICAgICBleHRyYWN0b3JwYXJhbXMgPSByZS5maW5kYWxsKCdkZWYgRGF0YXNldEV4dHJhY3Rvci4qXCguKj9cKScsIGV4dHJhY3RvclNjcmlwdCkNCg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICMgUmV0cml2aW5nIHBhcmFtZXRlcnMgb2YgRGF0YXNldCBFeHRyYWN0b3INCiAgICAgICAgICAgICAgICBleHRyYWN0b3JwYXJhbXMgPSByZS5maW5kYWxsKCdcKC4qP1wpJywgZXh0cmFjdG9ycGFyYW1zWzBdKQ0KICAgICAgICAgICAgICAgIGV4dHJhY3RvcnBhcmFtcyA9IGV4dHJhY3RvcnBhcmFtc1swXVsxOi0xXS5zcGxpdCgnLCAnKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIGV4dHJhY3RvcnBhcmFtcyA9IFtdDQogICAgICAgICAgICANCiAgICAgICAgICAgIHBhcmEgPSBbXQ0KICAgICAgICAgICAgZm9yIHAgaW4gZXh0cmFjdG9ycGFyYW1zOg0KICAgICAgICAgICAgICAgIHBhcmEuZXh0ZW5kKHAuc3BsaXQoJywnKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZGF0YXNldF9leHRyYWN0b3JfcGFyYW1bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXSA9IFtwLnNwbGl0KCc9JylbMF0uc3RyaXAoKSBmb3IgcCBpbiBwYXJhXQ0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGV4dHJhY3RvclNjcmlwdCA9IGV4dHJhY3RvclNjcmlwdC5yZXBsYWNlKCc8aWQ+Jywgbm9kZS5pZCkNCg0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnYXR0cmlidXRlcyddLCBzdHIpOg0KICAgICAgICAgICAgICAgIG5vZGUuYXR0cmlidXRlc1snZGF0YXNldCddWydhdHRyaWJ1dGVzJ10gPSBqc29uLmxvYWRzKG5vZGUuYXR0cmlidXRlc1snZGF0YXNldCddWydhdHRyaWJ1dGVzJ10pDQogICAgICAgICAgICBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWydjb25uZWN0aW9uRGV0YWlscyddID0ganNvbi5sb2FkcygNCiAgICAgICAgICAgICAgICBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWydjb25uZWN0aW9uRGV0YWlscyddKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBleHRyYWN0c2NyaXB0c3VmZml4ID0gZXh0cmFjdG9yU2NyaXB0DQogICAgICAgICAgICANCiAgICAgICAgICAgICMgQ2hlY2tpbmcgaWYgdGhlIGZ1bmN0aW9uIGRlZmluaXRpb24gaXMgYWxyZWFkeSBleGlzdHMgaW4gc2NyaXB0DQogICAgICAgICAgICBpZiAobm9kZS5jbGFzc05hbWUgKyBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWyd0eXBlJ10pIGluIGZ1bmN0aW9uX2ZsYWc6DQogICAgICAgICAgICAgICAgcHJpbnQoJ2V4aXRzJywgKG5vZGUuY2xhc3NOYW1lICsgbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddKSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZnVuY3Rpb25fZmxhZ1sobm9kZS5jbGFzc05hbWUgKyBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWyd0eXBlJ10pXSA9IDENCiAgICAgICAgICAgICAgICBmdW5jdGlvbnMuYXBwZW5kKGV4dHJhY3RvclNjcmlwdCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaW1wb3J0X2xpbmVzID0gaW1wb3J0X2xpbmVzICsgXA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXVtub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWyd0eXBlJ11dWydpbXBvcnRzJ10NCiAgICAgICAgICAgIHJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50cyArIFwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXS5nZXQoJ3JlcXVpcmVtZW50cycsW10pDQoNCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnQWRhcHRlck1ldGhvZENvbmZpZyc6DQogICAgICAgICAgICBwcmludCgnbm9kZSBuYW1lIGlzOiAnLCBub2RlLm5hbWUpDQogICAgICAgICAgICB0cmFuc2Zvcm1lclNjcmlwdCA9IGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ3NjcmlwdCddDQogICAgICAgICAgICBwcmludChlbGVtZW50KQ0KICAgICAgICAgICAgbm9kZW5hbWUgPSAnJy5qb2luKG5vZGUubmFtZS5zcGxpdCgnICcpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB0cmFuc2Zvcm1lclNjcmlwdCA9IHRyYW5zZm9ybWVyU2NyaXB0LnJlcGxhY2UoJ188aWQ+JywgJycpDQogICAgICAgICAgICB0cmFuc2Zvcm1lclNjcmlwdCA9IHRyYW5zZm9ybWVyU2NyaXB0LnJlcGxhY2UoJzxpZD4nLCBub2RlLmlkKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIENoZWNraW5nIGlmIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9uIGlzIGFscmVhZHkgZXhpc3RzIGluIHNjcmlwdA0KICAgICAgICAgICAgaWYgbm9kZS5jbGFzc05hbWUgaW4gZnVuY3Rpb25fZmxhZzoNCiAgICAgICAgICAgICAgICBwcmludCgnZXhpdHMnLCBub2RlLmNsYXNzTmFtZSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZnVuY3Rpb25fZmxhZ1tub2RlLmNsYXNzTmFtZV0gPSAxDQogICAgICAgICAgICAgICAgZnVuY3Rpb25zLmFwcGVuZCh0cmFuc2Zvcm1lclNjcmlwdCkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIGltcG9ydF9saW5lcyA9IGltcG9ydF9saW5lcyArIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ2ltcG9ydHMnXQ0KICAgICAgICAgICAgaWYgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXS5nZXQoJ3JlcXVpcmVtZW50cycsICcnKSAhPSAnJzoNCiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHMgKyBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddLmdldCgncmVxdWlyZW1lbnRzJywgW10pDQogICAgICAgICAgICAgICAgcHJpbnQocmVxdWlyZW1lbnRzKQ0KICAgICAgICAgICAgDQogICAgICAgICMgUHJlLXByb2Nlc3NpbmcgU2NyaXB0DQogICAgICAgIGVsaWYgbm9kZS5jbGFzc05hbWUgPT0gJ1NjcmlwdFRyYW5zZm9ybWVyQ29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnUHJlUHJvY2Vzc2luZ1NjcmlwdENvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ1Bvc3RQcm9jZXNzaW5nU2NyaXB0Q29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnTW9kZWxQcmVkaWN0U2NyaXB0Q29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnUHl0aG9uU2NyaXB0Q29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnUG9zdFB5dGhvblNjcmlwdENvbmZpZyc6DQogICAgICAgICAgICBwcm9jZXNzaW5nU2NyaXB0ID0gJycNCiAgICAgICAgICAgIHByb2Nlc3NpbmdTY3JpcHQgPSAoJycpLmpvaW4obm9kZS5hdHRyaWJ1dGVzWydzY3JpcHQnXSkNCiAgICAgICAgICAgIHByaW50KHByb2Nlc3NpbmdTY3JpcHQpDQogICAgICAgICAgICAjIHByb2Nlc3NpbmdTY3JpcHQgPSBwcm9jZXNzaW5nU2NyaXB0LnJlcGxhY2UoJ1xcbicsICdccicpDQogICAgICAgICAgICAjcHJvY2Vzc2luZ1NjcmlwdCA9IHByb2Nlc3NpbmdTY3JpcHQucmVwbGFjZSgnXG4nLCAnXG4nKQ0KICAgICAgICAgICAgI3Byb2Nlc3NpbmdTY3JpcHQgPSBwcm9jZXNzaW5nU2NyaXB0LnJlcGxhY2UoJ1xyJywgJ1xuJykNCiAgICAgICAgICAgIHByaW50KHByb2Nlc3NpbmdTY3JpcHQpDQogICAgICAgICAgICBwcm9jZXNzaW5nU2NyaXB0ID0gcHJvY2Vzc2luZ1NjcmlwdC5yZXBsYWNlKCdfPGlkPicsICcnKQ0KICAgICAgICAgICAgcHJvY2Vzc2luZ1NjcmlwdCA9IHByb2Nlc3NpbmdTY3JpcHQucmVwbGFjZSgnPGlkPicsIG5vZGUuaWQpDQogICAgICAgICAgICBub2RlbmFtZSA9IG5vZGUuYXR0cmlidXRlcy5nZXQoJ0Z1bmN0aW9uTmFtZScsICcnKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIENoZWNraW5nIGlmIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9uIGlzIGFscmVhZHkgZXhpc3RzIGluIHNjcmlwdA0KICAgICAgICAgICAgaWYgbm9kZW5hbWUgaW4gZnVuY3Rpb25fZmxhZzoNCiAgICAgICAgICAgICAgICBwcmludCgnZXhpdHMnLCBub2RlbmFtZSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZnVuY3Rpb25fZmxhZ1tub2RlbmFtZV0gPSAxDQogICAgICAgICAgICAgICAgZnVuY3Rpb25zLmFwcGVuZChwcm9jZXNzaW5nU2NyaXB0KQ0KICAgICAgICAgICAgIyBpZiBpc2luc3RhbmNlKG5vZGUuYXR0cmlidXRlc1sncmVxdWlyZW1lbnRzJ10sc3RyKSA6DQogICAgICAgICAgICByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHMgKyBub2RlLmF0dHJpYnV0ZXNbJ3JlcXVpcmVtZW50cyddLnNwbGl0KCcsJykNCiAgICAgICAgICAgICAgICAjIHByaW50KGYiXG5cbiBAQEBAQEBAQEBAIFJlcXVpcmVtZW50cyBpbiBQeXRob24gU2NyaXB0czoge3JlcXVpcmVtZW50c31AQEBAQEBAQEBAQEBAXG5cbiIpDQogICAgICAgIA0KICAgICAgICAjIExvYWRlcnMNCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnRGF0YXNldExvYWRlckNvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ01vZGVsTG9hZGVyQ29uZmlnJzoNCg0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGxvYWRlcnNjcmlwdCA9IGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXVsnc2NyaXB0J10NCiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHMgKyBcDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXVtub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWyd0eXBlJ11dLmdldCgncmVxdWlyZW1lbnRzJyxbXSkNCg0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIGxvYWRlcnNjcmlwdCA9IGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ3NjcmlwdCddDQogICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzICsgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXS5nZXQoJ3JlcXVpcmVtZW50cycsJycpDQogICAgICAgICAgICBsb2FkZXJzY3JpcHQgPSBsb2FkZXJzY3JpcHQucmVwbGFjZSgnXzxpZD4nLCAnJykNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBSZXRyaXZpbmcgcGFyYW1ldGVycyBvZiBEYXRhc2V0IExvYWRlcg0KICAgICAgICAgICAgZXh0cmFjdG9ycGFyYW1zID0gcmUuZmluZGFsbCgnZGVmIERhdGFzZXRMb2FkZXJcKC4qP1wpJywgbG9hZGVyc2NyaXB0KQ0KDQogICAgICAgICAgICBleHRyYWN0b3JwYXJhbXMgPSByZS5maW5kYWxsKCdcKC4qP1wpJywgZXh0cmFjdG9ycGFyYW1zWzBdKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBleHRyYWN0b3JwYXJhbXMgPSBleHRyYWN0b3JwYXJhbXNbMF1bMTotMV0uc3BsaXQoJywgJykNCiAgICAgICAgICAgIHBhcmEgPSBbXQ0KICAgICAgICAgICAgZm9yIHAgaW4gZXh0cmFjdG9ycGFyYW1zOg0KICAgICAgICAgICAgICAgIHBhcmEuZXh0ZW5kKHAuc3BsaXQoJywnKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZGF0YXNldF9sb2FkZXJfcGFyYW1zID0gW3Auc3BsaXQoJz0nKVswXS5zdHJpcCgpIGZvciBwIGluIHBhcmFdDQogICAgICAgICAgICBsb2FkZXJzY3JpcHQgPSBsb2FkZXJzY3JpcHQucmVwbGFjZSgnPGlkPicsIG5vZGUuaWQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIG5vZGUuYXR0cmlidXRlcy5nZXQoJ2RhdGFzZXQnLCAnJykgIT0gJycgYW5kIGlzaW5zdGFuY2Uobm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2F0dHJpYnV0ZXMnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKToNCiAgICAgICAgICAgICAgICBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnYXR0cmlidXRlcyddID0ganNvbi5sb2Fkcyhub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnYXR0cmlidXRlcyddKQ0KICAgICAgICAgICAgaWYgbm9kZS5hdHRyaWJ1dGVzLmdldCgnZGF0YXNldCcsICcnKSAhPSAnJyBhbmQgaXNpbnN0YW5jZShub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWydjb25uZWN0aW9uRGV0YWlscyddICwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyKToNCiAgICAgICAgICAgICAgICBub2RlLmF0dHJpYnV0ZXNbJ2RhdGFzZXQnXVsnZGF0YXNvdXJjZSddWydjb25uZWN0aW9uRGV0YWlscyddID0ganNvbi5sb2FkcygNCiAgICAgICAgICAgICAgICAgICAgbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsnY29ubmVjdGlvbkRldGFpbHMnXSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBDaGVja2luZyBpZiB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbiBpcyBhbHJlYWR5IGV4aXN0cyBpbiBzY3JpcHQNCiAgICAgICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lIGluIGZ1bmN0aW9uX2ZsYWc6DQogICAgICAgICAgICAgICAgcHJpbnQoJ2V4aXRzJywgbm9kZS5jbGFzc05hbWUpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uX2ZsYWdbbm9kZS5jbGFzc05hbWVdID0gMQ0KICAgICAgICAgICAgICAgIGZ1bmN0aW9ucy5hcHBlbmQobG9hZGVyc2NyaXB0KQ0KDQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgaW1wb3J0X2xpbmVzID0gaW1wb3J0X2xpbmVzICsgXA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXVsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltcG9ydHMnXQ0KDQogICAgICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICAgICAgaW1wb3J0X2xpbmVzID0gaW1wb3J0X2xpbmVzICsgXA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ2ltcG9ydHMnXQ0KICAgICAgICANCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnR2VuZXJpYyBUb29sJzoNCiAgICAgICAgICAgIHNjcmlwdCA9IG5vZGUuYXR0cmlidXRlc1snc2NyaXB0J10NCiAgICAgICAgICAgIGlmIG5vZGUuYXR0cmlidXRlc1snUmVxdWlyZW1lbnRzJ10gIT0gJycgb3Igbm9kZS5hdHRyaWJ1dGVzWydSZXF1aXJlbWVudHMnXSAhPSAnTm9uZSc6DQogICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzICsgbm9kZS5hdHRyaWJ1dGVzWydSZXF1aXJlbWVudHMnXS5yZXBsYWNlKCIsICIsIiwiKS5zcGxpdCgiLCIpDQogICAgICAgICAgICBpZiBub2RlLmF0dHJpYnV0ZXNbJ0ltcG9ydHMnXSAhPSAnJyBvciBub2RlLmF0dHJpYnV0ZXNbJ0ltcG9ydHMnXSAhPSAnTm9uZSc6DQogICAgICAgICAgICAgICAgaW1wb3J0X2xpbmVzID0gaW1wb3J0X2xpbmVzICsgbm9kZS5hdHRyaWJ1dGVzWydJbXBvcnRzJ10ucmVwbGFjZSgiLCAiLCIsIikuc3BsaXQoIiwiKSAgIA0KICAgICAgICAgICAgcHJvY2Vzc2luZ1NjcmlwdCA9ICcnDQogICAgICAgICAgICBwcm9jZXNzaW5nU2NyaXB0ID0gKCcnKS5qb2luKHNjcmlwdCkNCiAgICAgICAgICAgIHRvb2xfZnVuY3Rpb25zLmFwcGVuZChwcm9jZXNzaW5nU2NyaXB0KQ0KICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnRmxhc2tBcHAnOg0KICAgICAgICAgICAgZmxhc2tfZmxhZyA9IFRydWUNCiAgICAgICAgICAgIHByb2Nlc3NpbmdTY3JpcHQgPSAnJw0KICAgICAgICAgICAgcHJvY2Vzc2luZ1NjcmlwdCA9ICgnJykuam9pbihub2RlLmF0dHJpYnV0ZXNbJ3NjcmlwdCddKQ0KICAgICAgICAgICAgZmxhc2tfYXBwLmFwcGVuZChwcm9jZXNzaW5nU2NyaXB0KQ0KICAgICAgICAgICAgdHJhbnNmb3JtZXJTY3JpcHQgPSBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddWydzY3JpcHQnXQ0KICAgICAgICAgICAgZnVuY3Rpb25zLmFwcGVuZCh0cmFuc2Zvcm1lclNjcmlwdCkNCiAgICAgICAgICAgIGltcG9ydF9saW5lcyA9IGltcG9ydF9saW5lcyArIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ2ltcG9ydHMnXQ0KICAgICAgICAgICAgaWYgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXS5nZXQoJ3JlcXVpcmVtZW50cycsICcnKSAhPSAnJzoNCiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHMgKyBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddLmdldCgncmVxdWlyZW1lbnRzJywgW10pDQoNCiAgICAgICAgICAgICAgICANCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnRmxhc2tBUFAnOg0KICAgICAgICAgICAgZmxhc2tfZmxhZyA9IFRydWUNCiAgICAgICAgICAgIHByb2Nlc3NpbmdTY3JpcHQgPSAnJw0KICAgICAgICAgICAgcHJvY2Vzc2luZ1NjcmlwdCA9ICgnJykuam9pbihub2RlLmF0dHJpYnV0ZXNbJ3NjcmlwdCddKQ0KICAgICAgICAgICAgZmxhc2tfYXBwLmFwcGVuZChwcm9jZXNzaW5nU2NyaXB0KQ0KICAgICAgICAgICAgdHJhbnNmb3JtZXJTY3JpcHQgPSBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddWydzY3JpcHQnXQ0KICAgICAgICAgICAgZnVuY3Rpb25zLmFwcGVuZCh0cmFuc2Zvcm1lclNjcmlwdCkNCiAgICAgICAgICAgIGltcG9ydF9saW5lcyA9IGltcG9ydF9saW5lcyArIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ11bJ2ltcG9ydHMnXQ0KICAgICAgICAgICAgaWYgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXS5nZXQoJ3JlcXVpcmVtZW50cycsICcnKSAhPSAnJzoNCiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHMgKyBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddLmdldCgncmVxdWlyZW1lbnRzJywgW10pDQogICAgICAgICAgICAgICAgIyBwcmludChmIlxuXG5AQEBAQEBAQEBAQEAgUmVxdWlyZW1lbnRzIGluIGZsYXNrIG5vZGU6IHtyZXF1aXJlbWVudHN9IEBAQEBAQEBAQEBAQEBAQEBAXG5cbiIpDQogICAgICAgIA0KICAgICAgICBlbGlmIG5vZGUuY2xhc3NOYW1lPT0nUHl0aG9uQ2xhc3MnOg0KICAgICAgICAgICAgZmxhc2tfZmxhZyA9IFRydWUNCiAgICAgICAgICAgIHByb2Nlc3NpbmdTY3JpcHQgPSAnJw0KICAgICAgICAgICAgcHJvY2Vzc2luZ1NjcmlwdCA9ICgnJykuam9pbihub2RlLmF0dHJpYnV0ZXNbJ3NjcmlwdCddKQ0KICAgICAgICAgICAgZnVuY3Rpb25zLmFwcGVuZChwcm9jZXNzaW5nU2NyaXB0KQ0KDQogICAgICAgICMgVHJhbnNmb3JtZXJzDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCgnQEBAQEBAQEBAQEBAIG5vZGUgbmFtZSBpczogJywgbm9kZS5uYW1lKQ0KICAgICAgICAgICAgTm9kZW5hbWUgPSBub2RlLmNsYXNzTmFtZQ0KICAgICAgICAgICAgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcyANCiAgICAgICAgICAgIGZvciBrZXksdmFsdWUgaW4gYXR0cmlidXRlcy5pdGVtcygpOg0KICAgICAgICAgICAgICAgIHBhcmFtX2tleSA9ICIiDQogICAgICAgICAgICAgICAgcGFyYW1fa2V5ICs9IE5vZGVuYW1lDQogICAgICAgICAgICAgICAgcGFyYW1fa2V5ICs9ICJfIg0KICAgICAgICAgICAgICAgIHBhcmFtX2tleSArPSBrZXkNCiAgICAgICAgICAgICAgICBjaGF0Ym90X3BhcmFtc1twYXJhbV9rZXldPXZhbHVlIA0KICAgICAgICAgICAgdHJhbnNmb3JtZXJTY3JpcHQgPSBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddWydzY3JpcHQnXQ0KICAgICAgICAgICAgcHJpbnQoZWxlbWVudCkNCiAgICAgICAgICAgIG5vZGVuYW1lID0gJycuam9pbihub2RlLm5hbWUuc3BsaXQoJyAnKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdHJhbnNmb3JtZXJTY3JpcHQgPSB0cmFuc2Zvcm1lclNjcmlwdC5yZXBsYWNlKCdfPGlkPicsICcnKQ0KICAgICAgICAgICAgdHJhbnNmb3JtZXJTY3JpcHQgPSB0cmFuc2Zvcm1lclNjcmlwdC5yZXBsYWNlKCc8aWQ+Jywgbm9kZS5pZCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBDaGVja2luZyBpZiB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbiBpcyBhbHJlYWR5IGV4aXN0cyBpbiBzY3JpcHQNCiAgICAgICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lIGluIGZ1bmN0aW9uX2ZsYWc6DQogICAgICAgICAgICAgICAgcHJpbnQoJ2V4aXRzJywgbm9kZS5jbGFzc05hbWUpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uX2ZsYWdbbm9kZS5jbGFzc05hbWVdID0gMQ0KICAgICAgICAgICAgICAgIGZ1bmN0aW9ucy5hcHBlbmQodHJhbnNmb3JtZXJTY3JpcHQpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBpbXBvcnRfbGluZXMgPSBpbXBvcnRfbGluZXMgKyBlbGVtZW50Wydjb2RlR2VuZXJhdGlvbiddWydpbXBvcnRzJ10NCiAgICAgICAgICAgIGlmIGVsZW1lbnRbJ2NvZGVHZW5lcmF0aW9uJ10uZ2V0KCdyZXF1aXJlbWVudHMnLCAnJykgIT0gJyc6DQogICAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzICsgZWxlbWVudFsnY29kZUdlbmVyYXRpb24nXS5nZXQoJ3JlcXVpcmVtZW50cycsIFtdKQ0KICAgICAgICAgICAgICAgIHByaW50KHJlcXVpcmVtZW50cykNCiAgICAgICAgICAgIA0KDQoNCiAgICBpbXBvcnRfbGluZXMgPSBbbCBmb3IgbCBpbiBzZXQoaW1wb3J0X2xpbmVzKSBpZiBsICE9ICcnXQ0KICAgIHJlcXVpcmVtZW50cyA9IFtsIGZvciBsIGluIHNldChyZXF1aXJlbWVudHMpIGlmIGwgIT0gJyddDQogICAgDQogICAgaWYgZmxhc2tfZmxhZzoNCiAgICAgICAgcGlwZWxpbmVDb2RlID0gYmFzZVNjcmlwdF9mbGFzaygpDQogICAgZWxzZToNCiAgICAgICAgcGlwZWxpbmVDb2RlID0gYmFzZVNjcmlwdCgpDQogICAgcGlwZWxpbmVDb2RlID0gcGlwZWxpbmVDb2RlLnJlcGxhY2UoJ3tpbXBvcnRzfScsICgnXG4nKS5qb2luKGltcG9ydF9saW5lcykpDQogICAgaWYgbGVuKHJlcXVpcmVtZW50cyk+MDoNCiAgICAgICAgcGlwZWxpbmVDb2RlID0gcGlwZWxpbmVDb2RlLnJlcGxhY2UoJ3tyZXF1aXJlbWVudHN9JywgJ1wnJysgKCdcJyxcJycpLmpvaW4ocmVxdWlyZW1lbnRzKSsnXCcnKQ0KICAgIGVsc2U6DQogICAgICAgIHBpcGVsaW5lQ29kZSA9IHBpcGVsaW5lQ29kZS5yZXBsYWNlKCd7cmVxdWlyZW1lbnRzfScsICcnKQ0KICAgIA0KICAgIGlmIGxlbihjaGF0Ym90X3BhcmFtcyk+MDoNCiAgICAgICAgcGlwZWxpbmVDb2RlID0gcGlwZWxpbmVDb2RlLnJlcGxhY2UoJ3tjaGF0Ym90X3BhcmFtc30nLCBqc29uLmR1bXBzKGNoYXRib3RfcGFyYW1zKSApDQogICAgZWxzZToNCiAgICAgICAgIHBpcGVsaW5lQ29kZSA9IHBpcGVsaW5lQ29kZS5yZXBsYWNlKCd7Y2hhdGJvdF9wYXJhbXN9JywgJ05vbmUnKQ0KICAgICAgICANCiAgICBwaXBlbGluZUNvZGUgPSBwaXBlbGluZUNvZGUucmVwbGFjZSgne3BpcGVsaW5lTmFtZX0nLCBhcmdzRGljdFsncGlwZWxpbmVOYW1lJ10pDQogICAgcGlwZWxpbmVDb2RlID0gcGlwZWxpbmVDb2RlLnJlcGxhY2UoJ3tmdW5jdGlvbnN9JywgKCdccicpLmpvaW4oZnVuY3Rpb25zKSkNCiAgICBwaXBlbGluZUNvZGUgPSBwaXBlbGluZUNvZGUucmVwbGFjZSgne2ZsYXNrX2FwcH0nLCAoJ1xyJykuam9pbihmbGFza19hcHApKQ0KICAgIHBpcGVsaW5lQ29kZSA9IHBpcGVsaW5lQ29kZS5yZXBsYWNlKCd7dG9vbF9mdW5jdGlvbnN9JywgKCdccicpLmpvaW4odG9vbF9mdW5jdGlvbnMpKQ0KICAgIGV4ZWN1dGlvbk9yZGVyID0gJ1xuJw0KICAgIA0KICAgIA0KICAgIA0KICAgIGZvciBub2RlIGluIG9yZGVyZWRFbGVtZW50TGlzdDoNCiAgICAgICAgaW5wdXRzID0gW10NCiAgICAgICAgDQogICAgICAgICMgSW5pdGlhbGl6aW5nIHBvc2l0aW9uaW5nIG9yZGVyIGZvciBpbnB1dCBlbnRyaWVzIG9mIGEgbm9kZQ0KICAgICAgICBwb3NpdGlvbl9vcmRlcmluZyA9IHsnTGVmdE1pZGRsZSc6IDAsJ1RvcENlbnRlcic6IDEsICdSaWdodE1pZGRsZSc6IDIsICdCb3R0b21DZW50ZXInOiAzfQ0KICAgICAgICBpbmRleF9vcmRlcmluZyA9IHswOiAnTGVmdE1pZGRsZScsIDE6ICdUb3BDZW50ZXInLCAyOiAnUmlnaHRNaWRkbGUnLCAzOiAnQm90dG9tQ2VudGVyJ30NCiAgICAgICAgb3V0cHV0cyA9IFtdDQogICAgICAgIG5vZGVuYW1lID0gJycuam9pbihub2RlLm5hbWUuc3BsaXQoJyAnKSkNCiAgICAgICAgIyBub2RlbmFtZSA9ICdfJy5qb2luKG5vZGUubmFtZS5zdHJpcCgpLnNwbGl0KCcgJykpLmxvd2VyKCkNCiAgICAgICAgbm9kZWlkID0gbm9kZS5pZA0KICAgICAgICANCiAgICAgICAgaWYgbm9kZW5hbWUgPT0gJ0RhdGFzZXRFeHRyYWN0b3InOg0KICAgICAgICAgICAgbm9kZW5hbWUgPSBub2RlbmFtZSArIG5vZGUuYXR0cmlidXRlc1snZGF0YXNldCddWydkYXRhc291cmNlJ11bJ3R5cGUnXQ0KICAgICAgICANCiAgICAgICAgIyBpZiBub2RlbmFtZSA9PSAnUHl0aG9uU2NyaXB0JyBvciBub2RlbmFtZSA9PSAnUG9zdFB5dGhvblNjcmlwdCcgb3Igbm9kZW5hbWUgPT0gJ1Bvc3RQcm9jZXNzaW5nU2NyaXB0JyBvciBub2RlbmFtZSA9PSAnUHJlUHJvY2Vzc2luZ1NjcmlwdCc6DQogICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lID09ICdTY3JpcHRUcmFuc2Zvcm1lckNvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ1ByZVByb2Nlc3NpbmdTY3JpcHRDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdQb3N0UHJvY2Vzc2luZ1NjcmlwdENvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ01vZGVsUHJlZGljdFNjcmlwdENvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ1B5dGhvblNjcmlwdENvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ1Bvc3RQeXRob25TY3JpcHRDb25maWcnOg0KICAgICAgICAgICAgbm9kZW5hbWUgPSBub2RlLmF0dHJpYnV0ZXMuZ2V0KCdGdW5jdGlvbk5hbWUnLCAnJykNCiAgICAgICAgICAgIG5vZGUuZm9ybWF0cyA9IHtwYXJhWyduYW1lJ10uc3BsaXQoJzonKVswXTogY29uKHBhcmFbJ25hbWUnXS5zcGxpdCgnOicpWy0xXSwgcGFyYVsndmFsdWUnXSkgZm9yIHBhcmEgaW4gbm9kZS5hdHRyaWJ1dGVzLmdldCgncGFyYW1zJywgJycpIGlmIGxlbihwYXJhKSA+IDB9DQogICAgICAgICAgICBub2RlLmF0dHJpYnV0ZXMgPSB7cGFyYVsnbmFtZSddLnNwbGl0KCc6JylbMF06IHBhcmFbJ3ZhbHVlJ10gZm9yIHBhcmEgaW4gbm9kZS5hdHRyaWJ1dGVzLmdldCgncGFyYW1zJywgJycpIGlmIGxlbihwYXJhKSA+IDB9DQoNCiAgICAgICAgDQogICAgICAgIGZvciBjb25uZWN0b3IgaW4gbm9kZS5jb25uZWN0b3JzOg0KDQogICAgICAgICAgICBpZiAoY29ubmVjdG9yWyd0eXBlJ10gPT0gJ3RhcmdldCcpOg0KICAgICAgICAgICAgICAgIGlucHV0cy5hcHBlbmQocG9zaXRpb25fb3JkZXJpbmdbY29ubmVjdG9yWydwb3NpdGlvbiddXSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjb25uZWN0b3JbJ3R5cGUnXSA9PSAnc291cmNlJyk6DQogICAgICAgICAgICAgICAgb3V0cHV0cy5hcHBlbmQoJ2RzXycgKyBjb25uZWN0b3JbJ2VsZW1lbnRQb3NpdGlvbiddICsgJ18nICsgY29ubmVjdG9yWydlbGVtZW50SWQnXSkNCiAgICAgICAgDQogICAgICAgICMgUG9zaXRpb25pbmcgaW5wdXQgZW50cmllcyBmb3IgYSBub2RlICAgICAgICANCiAgICAgICAgaW5wdXRzLnNvcnQoKQ0KICAgICAgICANCiAgICAgICAgaW5wdXRzID0gWydkc18nICsgaW5kZXhfb3JkZXJpbmdbcG9zXSArICdfJyArIG5vZGVpZCBmb3IgcG9zIGluIGlucHV0c10NCiAgICAgICAgDQogICAgICAgICMgQWRkaW5nIHBhcmFtZXRlcnMgZm9yIHJlc3BlY3RpdmUgZnVuY3Rpb24gY2FsbA0KICAgICAgICBkZWZhdWx0X3BhcmFtcyA9IFtdDQogICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lID09ICdEYXRhc2V0RXh0cmFjdG9yQ29uZmlnJzoNCiAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zID0gW10NCiAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zID0gW2UgKyAnPVwnPCcgKyBlLnJlcGxhY2UoJ18nLCAnLicpICsgJz5cJycgZm9yIGUgaW4gZGF0YXNldF9leHRyYWN0b3JfcGFyYW1bbm9kZS5hdHRyaWJ1dGVzWydkYXRhc2V0J11bJ2RhdGFzb3VyY2UnXVsndHlwZSddXV0NCiAgICAgICAgICAgIA0KICAgICAgICBlbGlmIG5vZGUuY2xhc3NOYW1lID09ICdBZGFwdGVyTWV0aG9kQ29uZmlnJzoNCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbXMgPSBub2RlLmF0dHJpYnV0ZXMgICAgICAgICAgICANCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbSA9IGxpc3QoYWN0dWFsX3BhcmFtcy5rZXlzKCkpDQogICAgICAgICAgICBzY3JpcHRfYm9keSA9IHtwYXJhbTogJ18nLmpvaW4ocmUuc3BsaXQoJ1xzXHMqJywgcGFyYW0uc3RyaXAoKSkpIGZvciBwYXJhbSBpbiBhY3R1YWxfcGFyYW19DQogICAgICAgICAgICBkZWZhdWx0X3BhcmFtcyA9IFtdDQogICAgICAgICAgICBhY3R1YWxfZm9ybWF0cyA9IG5vZGUuZm9ybWF0cw0KICAgICAgICAgICAgTm9uZVR5cGUgPSB0eXBlKE5vbmUpDQogICAgICAgIA0KICAgICAgICAgICAgIyBWYWx1ZSB0eXBlIGFzIFN0cmluZyBvciBOb24tc3RyaW5nIGRlcGVuZGluZyBvbiBmb3JtYXQgdHlwZQ0KICAgICAgICAgICAgZm9yIGtleSwgdmFsIGluIHNjcmlwdF9ib2R5Lml0ZW1zKCk6IA0KICAgICAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zLmFwcGVuZCh2YWwgKyAnPTwnICsga2V5ICsgJz4nKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgIGVsaWYgbm9kZS5jbGFzc05hbWUgPT0gJ0RhdGFzZXRMb2FkZXJDb25maWcnOg0KICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMgPSBbXQ0KICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMgPSBbZSArICc9XCc8JyArIGUucmVwbGFjZSgnXycsICcuJykgKyAnPlwnJyBmb3IgZSBpbiBkYXRhc2V0X2xvYWRlcl9wYXJhbXNbMTpdXQ0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgIyBlbGlmIG5vZGUuY2xhc3NOYW1lID09ICdQeXRob25TY3JpcHRDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdQb3N0UHl0aG9uU2NyaXB0Q29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnUHJlUHJvY2Vzc2luZ1NjcmlwdENvbmZpZycgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ1Bvc3RQcm9jZXNzaW5nU2NyaXB0Q29uZmlnJzoNCiAgICAgICAgZWxpZiBub2RlLmNsYXNzTmFtZSA9PSAnU2NyaXB0VHJhbnNmb3JtZXJDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdQcmVQcm9jZXNzaW5nU2NyaXB0Q29uZmlnJyBvciBub2RlLmNsYXNzTmFtZSA9PSAnUG9zdFByb2Nlc3NpbmdTY3JpcHRDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdNb2RlbFByZWRpY3RTY3JpcHRDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdQeXRob25TY3JpcHRDb25maWcnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdQb3N0UHl0aG9uU2NyaXB0Q29uZmlnJzoNCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbXMgPSBub2RlLmF0dHJpYnV0ZXMgICAgICAgICAgICANCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbSA9IGxpc3QoYWN0dWFsX3BhcmFtcy5rZXlzKCkpDQogICAgICAgICAgICBzY3JpcHRfYm9keSA9IHtwYXJhbTogJ18nLmpvaW4ocmUuc3BsaXQoJ1xzXHMqJywgcGFyYW0ubG93ZXIoKS5zdHJpcCgpKSkgKyAnX3BhcmFtJyBmb3IgcGFyYW0gaW4gYWN0dWFsX3BhcmFtfQ0KICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMgPSBbXQ0KICAgICAgICAgICAgYWN0dWFsX2Zvcm1hdHMgPSBub2RlLmZvcm1hdHMNCiAgICAgICAgICAgIE5vbmVUeXBlID0gdHlwZShOb25lKQ0KICAgICAgICANCiAgICAgICAgICAgIGZvciBrZXksIHZhbCBpbiBzY3JpcHRfYm9keS5pdGVtcygpOiANCiAgICANCiAgICAgICAgICAgICAgICBpZiBrZXkgPT0gJ3NjcmlwdCc6DQogICAgICAgICAgICAgICAgICAgcGFzcw0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICMgVmFsdWUgdHlwZSBhcyBTdHJpbmcgb3IgTm9uLXN0cmluZyBkZXBlbmRpbmcgb24gZm9ybWF0IHR5cGUNCiAgICAgICAgICAgICAgICBlbGlmIGFjdHVhbF9mb3JtYXRzW2tleV0gPT0gJ3RleHQnOg0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X3BhcmFtcy5hcHBlbmQodmFsICsgJz1cJzwnICsga2V5ICsgJz5cJycpIA0KICAgICAgICAgICAgICAgIGVsaWYgYWN0dWFsX2Zvcm1hdHNba2V5XSA9PSAndGV4dGFyZWEnOg0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X3BhcmFtcy5hcHBlbmQodmFsICsgJz1cJ1wnXCc8JyArIGtleSArICc+XCdcJ1wnJykgDQogICAgICAgICAgICAgICAgZWxpZiBhY3R1YWxfZm9ybWF0c1trZXldID09ICdpbnRlZ2VyJzoNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMuYXBwZW5kKHZhbCArICc9PCcgKyBrZXkgKyAnPicpDQogICAgICAgICAgICAgICAgZWxpZiBhY3R1YWxfZm9ybWF0c1trZXldID09ICdib29sJzoNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMuYXBwZW5kKHZhbCArICc9PCcgKyBrZXkgKyAnPicpDQogICAgICAgICAgICAgICAgZWxpZiAnZHJvcCcgaW4gYWN0dWFsX2Zvcm1hdHNba2V5XS5sb3dlcigpOiAgIyBmb3IgZHJvcCBkb3duIHZhbHVlcw0KICAgICAgICAgICAgICAgICAgICBpZiBhY3R1YWxfZm9ybWF0c1thY3R1YWxfZm9ybWF0c1trZXldXVswXS5pc2FscGhhKCk6DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X3BhcmFtcy5hcHBlbmQodmFsICsgJz1cJzwnICsga2V5ICsgJz5cJycpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X3BhcmFtcy5hcHBlbmQodmFsICsgJz08JyArIGtleSArICc+JykNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0X3BhcmFtcy5hcHBlbmQodmFsICsgJz08JyArIGtleSArICc+JykNCiAgICAgICAgZWxzZTogICAgICAgICAgICAgICANCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbXMgPSBub2RlLmF0dHJpYnV0ZXMgICAgICAgICAgICANCiAgICAgICAgICAgIGFjdHVhbF9wYXJhbSA9IGxpc3QoYWN0dWFsX3BhcmFtcy5rZXlzKCkpDQogICAgICAgICAgICBzY3JpcHRfYm9keSA9IHtwYXJhbTogJ18nLmpvaW4ocmUuc3BsaXQoJ1xzXHMqJywgcGFyYW0ubG93ZXIoKS5zdHJpcCgpKSkgKyAnX3BhcmFtJyBmb3IgcGFyYW0gaW4gYWN0dWFsX3BhcmFtfQ0KICAgICAgICAgICAgcHJpbnQoJy8vLy8vLy8vLy8vLy8vJyxzY3JpcHRfYm9keSkNCiAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zID0gW10NCiAgICAgICAgICAgIGFjdHVhbF9mb3JtYXRzID0gbm9kZS5mb3JtYXRzDQogICAgICAgICAgICBOb25lVHlwZSA9IHR5cGUoTm9uZSkNCiAgICAgICAgDQogICAgICAgICAgICAjIFZhbHVlIHR5cGUgYXMgU3RyaW5nIG9yIE5vbi1zdHJpbmcgZGVwZW5kaW5nIG9uIGZvcm1hdCB0eXBlDQogICAgICAgICAgICBmb3Iga2V5LCB2YWwgaW4gc2NyaXB0X2JvZHkuaXRlbXMoKTogDQogICAgICAgICAgICAgICAgaWYgYWN0dWFsX2Zvcm1hdHNba2V5XSA9PSAndGV4dCc6DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zLmFwcGVuZCh2YWwgKyAnPVwnPCcgKyBrZXkgKyAnPlwnJykgDQogICAgICAgICAgICAgICAgZWxpZiBhY3R1YWxfZm9ybWF0c1trZXldID09ICd0ZXh0YXJlYSc6DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zLmFwcGVuZCh2YWwgKyAnPVwnXCdcJzwnICsga2V5ICsgJz5cJ1wnXCcnKSANCiAgICAgICAgICAgICAgICBlbGlmIGFjdHVhbF9mb3JtYXRzW2tleV0gPT0gJ2ludGVnZXInIG9yIGFjdHVhbF9mb3JtYXRzW2tleV0gPT0gJ2ludCc6DQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zLmFwcGVuZCh2YWwgKyAnPTwnICsga2V5ICsgJz4nKQ0KICAgICAgICAgICAgICAgIGVsaWYgYWN0dWFsX2Zvcm1hdHNba2V5XSA9PSAnYm9vbCc6DQogICAgICAgICAgICAgICAgICAgICMga2V5ID0gJ1RydWUnIGlmIGtleSA9PSAndHJ1ZScgZWxzZSAnRmFsc2UnDQogICAgICAgICAgICAgICAgICAgIHByaW50KCdrZXknLCBrZXkpDQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRfcGFyYW1zLmFwcGVuZCh2YWwgKyAnPTwnICsga2V5ICsgJz4nKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ2Ryb3AnIGluIGFjdHVhbF9mb3JtYXRzW2tleV0ubG93ZXIoKTogICMgZm9yIGRyb3AgZG93biB2YWx1ZXMNCiAgICAgICAgICAgICAgICAgICAgaWYgbm9kZS5jbGFzc05hbWUgPT0gJ0RhdGFFeHRyYWN0b3InOg0KICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsX2Zvcm1hdHNbYWN0dWFsX2Zvcm1hdHNba2V5XV0gPSBbe31dDQogICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoYWN0dWFsX2Zvcm1hdHNbYWN0dWFsX2Zvcm1hdHNba2V5XV1bMF0sIHN0cikgYW5kIGFjdHVhbF9mb3JtYXRzW2FjdHVhbF9mb3JtYXRzW2tleV1dWzBdLmlzYWxwaGEoKToNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMuYXBwZW5kKHZhbCArICc9XCc8JyArIGtleSArICc+XCcnKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMuYXBwZW5kKHZhbCArICc9PCcgKyBrZXkgKyAnPicpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdF9wYXJhbXMuYXBwZW5kKHZhbCArICc9PCcgKyBrZXkgKyAnPicpDQogICAgICAgICAgICAgICAgDQogICAgICAgICMgR2VuZXJhdGluZyBmdW5jdGlvbiBjYWxsDQogICAgICAgIGlmIGxlbihvdXRwdXRzKSA+IDA6DQogICAgICAgICAgICBjYWxsID0gJyAgICAnICsgJywnLmpvaW4ob3V0cHV0cykgKyAnID0gJyArIG5vZGVuYW1lICsgJygnICsgJywnLmpvaW4oaW5wdXRzKQ0KICAgICAgICAgICAgaWYgbGVuKGRlZmF1bHRfcGFyYW1zKSA+IDA6DQogICAgICAgICAgICAgICAgY2FsbCArPSAnLCAnIGlmIGxlbihpbnB1dHMpID4gMCBlbHNlICcnDQogICAgICAgICAgICAgICAgY2FsbCArPSAnLCcuam9pbihkZWZhdWx0X3BhcmFtcykNCiAgICAgICAgICAgIGNhbGwgKz0gICcpXG4nDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjYWxsID0gJyAgICAnICsgbm9kZW5hbWUgKyAnKCcgKyAnLCcuam9pbihpbnB1dHMpDQogICAgICAgICAgICBpZiBsZW4oZGVmYXVsdF9wYXJhbXMpID4gMDoNCiAgICAgICAgICAgICAgICBjYWxsICs9ICcsICcgaWYgbGVuKGlucHV0cykgPiAwIGVsc2UgJycNCiAgICAgICAgICAgICAgICBjYWxsICs9ICcsJy5qb2luKGRlZmF1bHRfcGFyYW1zKQ0KICAgICAgICAgICAgY2FsbCArPSAgJylcbicgICANCiAgICAgICAgICAgIA0KICAgICAgICAjIEZpbGxpbmcgdGhlIHVzZXIgaW5wdXR0ZWQgdmFsdWVzIGluIGZ1bmN0aW9uIGNhbGwNCiAgICAgICAgY2FsbCA9IGZpbGxEYXRhbm9kZShub2RlLCBjYWxsKSANCiAgICAgICAgDQogICAgICAgIGlmIG5vZGUuY2xhc3NOYW1lID09ICdGbGFza0FQUCcgb3Igbm9kZS5jbGFzc05hbWUgPT0gJ0ZsYXNrQXBwJzoNCiAgICAgICAgICAgIGZsYXNrX2NhbGwgKz0gY2FsbA0KICAgICAgICBpZiBub2RlLmNsYXNzTmFtZSAhPSAnRmxhc2tBUFAnIG9yIG5vZGUuY2xhc3NOYW1lID09ICdGbGFza0FQUCc6DQogICAgICAgICAgICBleGVjdXRpb25PcmRlciA9IGV4ZWN1dGlvbk9yZGVyICsgY2FsbCAgICANCg0KICAgIHByaW50KCdleGVjdXRpb25PcmRlcicsIGV4ZWN1dGlvbk9yZGVyKQ0KICAgIHBpcGVsaW5lQ29kZSA9IHBpcGVsaW5lQ29kZS5yZXBsYWNlKCd7ZXhlY3V0aW9uT3JkZXJ9JywgZXhlY3V0aW9uT3JkZXIpDQogICAgcGlwZWxpbmVDb2RlID0gcGlwZWxpbmVDb2RlLnJlcGxhY2UoJ3tleGVjdXRlZmxhc2t9JywgZmxhc2tfY2FsbCkNCiAgICBwaXBlbGluZUNvZGUgPSBwaXBlbGluZUNvZGUucmVwbGFjZSgnXHInLCAnXG4nKQ0KICAgIA0KICAgIA0KICAgIHdpdGggb3Blbihvcy5wYXRoLmpvaW4oYXJnc0RpY3RbJ3NjcmlwdFBhdGgnXSwgYXJnc0RpY3RbJ3BpcGVsaW5lTmFtZSddICsgJ19nZW5lcmF0ZWRDb2RlLnB5JyksICd3JykgYXMgZjoNCiAgICAgICAgZi53cml0ZWxpbmVzKHBpcGVsaW5lQ29kZSkNCg0KZ2VuZXJhdGVTY3JpcHQocGlwZWxpbmVfanNvbikNCg0KcHJpbnQoJ0NvbXBsZXRlZCcp","leo1311"
